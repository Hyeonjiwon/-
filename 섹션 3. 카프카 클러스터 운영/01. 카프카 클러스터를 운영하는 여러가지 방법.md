#### 카프카 클러스터를 운영하는 방법

- 아파치 카프카 클러스터를 서버에 직접 설치하고 운영하는 것이 기본적인 방법
  -> 각종 설정을 직접 컨트롤하여 세부적인 서버 설정을 통해 클러스터마다 최적의 방안으로 운영 가능
- 노하우가 없을 때, 각종 보안 설정, 모니터링 도구 선택, 설치, 운영할 때 어려움을 겪을 수 있음
- 운영상 시행착오를 줄이며, 빠르게 설치하여 안전하게 운영하기 위해 SaaS를 도입할 수 있음

<br>

#### 운영 방법에 따른 서비스 형태들

![스크린샷 2024-01-21 오후 10 50 15](https://github.com/Hyeonjiwon/Inflearn_Note/assets/47733530/0e844a27-6725-4646-9cba-8630be19ff43)

- 온프레미스 : 사용자가 자체적으로 보유한 전산실 서버에 직접 설치해 운영
- IaaS : 물리/가상 컴퓨팅 리소스를 발급받아 사용
- PaaS : 애플리케이션 개발 및 실행 환경을 제공
- SaaS : 소프트웨어의 배포, 실행을 업체에서 관리하고 기능 제공

<br>

#### 서비스 형태별 카프카 운영 방법
- **온프레미스**
  - 물리장비(서버) 구매, 네트워크 설치 구성 수행
  - 물리장비 운영체제 설치 수행
  - 오픈소스 카프카(아파치 2.0) 설치, 운영 (무료)
  - 또는 기업용 카프카(컨플루언트 플랫폼 등) 설치, 운영 (유료)
  - 모니터링 툴 (프로메테우스, 그라파나)

- **IaaS**
  - AWS, GCP와 같은 클라우드 서비스를 통해 물리/가상 컴퓨팅 리소스(서버)를 발급
  - 컴퓨팅 리소스에 오픈소스 카프카 설치, 운영
  - 또는 기업용 카프카(컨플루언트 플랫폼 등) 설치, 운영
  - 발급받은 서버에서 오픈소스 또는 기업용 카프카를 설치하거나 운영하는 점은 온프레미스 서비스와 동일 

- **SaaS**
  - 클라우드 서비스로서 카프카 클러스터, 브로커를 모두 소프트웨어로 제공
  - 대시보드, 툴, 서버 운영 권한을 위임해서 운영 
  - 컨플루언트 클라우드, AWS MSK는 대표적인 SaaS
  - 다양한 주변 생태계(ksqpDB, 모니터링 도구 등)를 옵션으로 제공

IaaS > 온프레미스

<br>

#### 오픈 소스 카프카를 직접 설치하여 운영하는 경우
- IaaS 또는 온프레미스 환경
- 카프카는 전송된 데이터를 모두 파일 시스템에 저장하고 대규모 데이터 통신이 일어나기 때문에 고성능의 하드웨어를 사용해야 함

- 상용 환경의 카프카 클러스터 운영시 브로커의 하드웨어 설정
  - 메모리 : 32GB, 힙 메모리 6GB (브로커) -> 나머지는 OS의 페이지 캐시 영역으로 활용
  - CPU : 24core
  - 디스크 : RAID 10 (NAS 사용 x)
  - 네트워크 : 데이터 통신량에 따라 다름
  - 파일시스템 : XFS 또는 ext4 

- 개발용 카프카 클러스터 / 상용 환경 카프카 클러스터
  - 브로커 개수 : 3~5개 / 10개
  - 메모리 : 16GB / 32GB
  - CPU : 16core / 24core
  - 디스크 : 사용량에 따라 달라짐


<br>

> 출처
> [[아파치 카프카 애플리케이션 프로그래밍] 개념부터 컨슈머, 프로듀서, 커넥트, 스트림즈까지!](https://www.inflearn.com/course/%EC%95%84%ED%8C%8C%EC%B9%98-%EC%B9%B4%ED%94%84%EC%B9%B4-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/dashboard)
